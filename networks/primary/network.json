{
    "version": 2.0,
    "types": {
        "HvCellboardId": {
            "type": "enum",
            "items": [
                "cellboard_0",
                "cellboard_1",
                "cellboard_2",
                "cellboard_3",
                "cellboard_4",
                "cellboard_5"
            ]
        },
        "HvMainboardStatus": {
            "type": "enum",
            "items": [
                "init",
                "idle",
                "fatal",
                "flash",
                "balancing",
                "airn_check",
                "precharge_check",
                "airp_check",
                "ts_on"
            ]
        },
        "HvCellboardStatus": {
            "type": "enum",
            "items": [
                "init",
                "idle",
                "fatal",
                "flash",
                "discharge",
                "cooldown"
            ]
        }
    },
    "messages": [
        {
            "name": "HV_FLASH",
            "fixed_id": 0,
            "interval": 200,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Start or stop the actual flash procedure, need a request first",
            "contents": {
                "start": "bool"
            }
        },
        {
            "name": "HV_FLASH_MAINBOARD_TX",
            "fixed_id": 1,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_MAINBOARD_RX",
            "fixed_id": 2,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_0_TX",
            "fixed_id": 3,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_0_RX",
            "fixed_id": 4,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_1_TX",
            "fixed_id": 5,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_1_RX",
            "fixed_id": 6,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_2_TX",
            "fixed_id": 7,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_2_RX",
            "fixed_id": 8,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_3_TX",
            "fixed_id": 9,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_3_RX",
            "fixed_id": 10,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_4_TX",
            "fixed_id": 11,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_4_RX",
            "fixed_id": 12,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_5_TX",
            "fixed_id": 13,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Message used by openblt to receive data data FROM the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_CELLBOARD_5_RX",
            "fixed_id": 14,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Message used by openblt to send data TO the microcontroller",
            "contents": {}
        },
        {
            "name": "HV_FLASH_REQUEST",
            "fixed_id": 15,
            "sending": [
                "TLM"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Flash procedure request for a single board of the High-Voltage BMS",
            "contents": {
                "mainboard": "bool",
                "cellboard_id": "HvCellboardId"
            }
        },
        {
            "name": "HV_FLASH_RESPONSE",
            "fixed_id": 16,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Reponse to a flash request",
            "contents": {
                "ready": "bool"
            }
        },
        {
            "name": "HV_MAINBOARD_VERSION",
            "fixed_id": 702,
            "interval": 1000,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "High-Voltage mainboard version: build-time timestamp and canlib build-time timestamp",
            "contents": {
                "canlib_build_time": "uint32",
                "component_build_time": "uint32"
            }
        },
        {
            "name": "HV_CELLBOARD_VERSION",
            "fixed_id": 705,
            "interval": 1000,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "High-Voltage cellboard version: build-time timestamp and canlib build-time timestamp",
            "contents": {
                "cellboard_id": "HvCellboardId",
                "canlib_build_time": "uint32",
                "component_build_time": {
                    "type": "uint32",
                    "range": [
                        0,
                        536870911
                    ],
                    "precision": 1,
                    "comment": "The build time is expressed in seconds with the 3 least significant bits truncated to fit into the CAN payload"
                }
            }
        },
        {
            "name": "HV_STATUS",
            "topic": "HYDRA",
            "priority": 1,
            "interval": 20,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Mainboard and cellboard internal FSM status",
            "contents": {
                "status": "HvMainboardStatus",
                "cellboard_0": "HvCellboardStatus",
                "cellboard_1": "HvCellboardStatus",
                "cellboard_2": "HvCellboardStatus",
                "cellboard_3": "HvCellboardStatus",
                "cellboard_4": "HvCellboardStatus",
                "cellboard_5": "HvCellboardStatus"
            }
        },
        {
            "name": "HV_SET_STATUS_ECU",
            "topic": "HYDRA",
            "priority": 0,
            "interval": 50,
            "sending": [
                "ECU"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Change the mainboard status from the ECU",
            "contents": {
                "status": "bool"
            }
        },
        {
            "name": "HV_SET_STATUS_HANDCART",
            "topic": "HYDRA",
            "priority": 0,
            "interval": 50,
            "sending": [
                "HANDCART"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Change the mainboard status from the handcart",
            "contents": {
                "status": "bool"
            }
        },
        {
            "name": "HV_SET_BALANCING_STATUS",
            "topic": "HYDRA",
            "priority": 2,
            "interval": 200,
            "sending": [
                "STEERING_WHEEL",
                "HANDCART"
            ],
            "receiving": [
                "HV"
            ],
            "description": "Start or stop the balancing procedure",
            "contents": {
                "status": "bool",
                "threshold": {
                    "type": "uint8",
                    "range": [
                        5,
                        200
                    ],
                    "comment": "The maximum allowed delta between the highest and lowest cell voltages in mV"
                }
            }
        },
        {
            "name": "HV_CURRENT",
            "topic": "HYDRA",
            "priority": 3,
            "interval": 20,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Mainboard current in A",
            "contents": {
                "current": {
                    "type": "float",
                    "range": [
                        -39,
                        135
                    ],
                    "precision": 0.001,
                    "comment": "The current sensor has a resolution of +/-10mA"
                }
            }
        },
        {
            "name": "HV_CELLS_VOLTAGE",
            "topic": "HYDRA",
            "priority": 2,
            "interval": 50,
            "sending": [
                "HV"
            ],
            "receiving": [],
            "description": "Cells voltages in V",
            "contents": {
                "cellboard_id": "HvCellboardId",
                "offset": {
                    "type": "uint8",
                    "force": "uint8",
                    "range": [
                        0,
                        20
                    ],
                    "precision": 4,
                    "comment": "Offset from the first cell of the segment"
                },
                "voltage_0": {
                    "type": "float",
                    "range": [
                        0,
                        5
                    ],
                    "precision": 0.0013
                },
                "voltage_1": {
                    "type": "float",
                    "range": [
                        0,
                        5
                    ],
                    "precision": 0.0013
                },
                "voltage_2": {
                    "type": "float",
                    "range": [
                        0,
                        5
                    ],
                    "precision": 0.0013
                }
            }
        }
    ]
}
